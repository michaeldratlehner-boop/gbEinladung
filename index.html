<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <title>üéâ 30er Geburtstagseinladung</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <style>
    :root{
      --bg1:#ffe29f; --bg2:#ffa99f; --card:#ffffff; --text:#1f2937; --muted:#6b7280;
      --soft:#f3f4f6; --shadow:0 14px 40px rgba(0,0,0,.14); --radius:18px;
      --btn:#ff6f61; --btnText:#ffffff; --btn2:#111827; --ok:#16a34a; --bad:#dc2626;
      --line:#ececec;
    }

    html, body{
      height:100%;
      margin:0;
      padding:0;
      -webkit-text-size-adjust:100%;
      overscroll-behavior:none;
      touch-action:manipulation;
      -webkit-user-select:none;
      user-select:none;
      -webkit-tap-highlight-color:transparent;
      font-family:system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--text);
    }

    body{
      min-height:100vh;
      display:grid;
      place-items:center;
      background:linear-gradient(135deg, var(--bg1), var(--bg2));
      padding:20px;
    }

    .card{
      width:min(560px, 94vw);
      background:var(--card);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      padding:28px;
      text-align:center;
    }

    h1{ margin:0 0 10px; font-size:28px; }
    p{ margin:10px 0; line-height:1.45; }
    .muted{ color:var(--muted); font-size:14px; }

    .divider{
      border:none;
      border-top:1px solid var(--line);
      margin:18px 0;
    }

    .row{
      display:flex;
      gap:12px;
      justify-content:center;
      flex-wrap:wrap;
      margin-top:14px;
    }

    .stat{
      background:var(--soft);
      border-radius:14px;
      padding:10px 12px;
      min-width:140px;
    }

    .btn{
      appearance:none;
      border:none;
      border-radius:14px;
      padding:14px 16px;
      font-size:16px;
      font-weight:600;
      cursor:pointer;
      background:var(--btn);
      color:var(--btnText);
      width:100%;
      touch-action:manipulation;
      text-decoration:none;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      box-sizing:border-box;
    }
    .btn.secondary{
      background:#fff;
      color:var(--btn2);
      border:1px solid #e5e7eb;
    }
    .btn.small{
      width:auto;
      padding:12px 14px;
      font-size:15px;
    }
    .btn:disabled{ opacity:.55; cursor:not-allowed; }

    .tap{ margin-top:12px; font-size:18px; padding:18px 16px; }
    .hidden{ display:none; }

    .details{
      margin:18px 0 6px;
      text-align:left;
      background:var(--soft);
      border-radius:14px;
      padding:14px 14px;
    }
    .details .line{
      display:flex;
      justify-content:space-between;
      gap:12px;
      padding:8px 6px;
      border-bottom:1px solid rgba(0,0,0,.05);
      font-size:15px;
    }
    .details .line:last-child{ border-bottom:none; }
    .details b{ font-weight:700; }

    .pill{
      display:inline-block;
      background:var(--soft);
      border-radius:999px;
      padding:6px 10px;
      font-size:13px;
      color:var(--muted);
    }

    /* ===== Memory ===== */
    .memoryWrap{
      background:var(--soft);
      border-radius:14px;
      padding:14px;
      text-align:left;
      margin-top:10px;
    }
    .memoryTop{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      flex-wrap:wrap;
      margin-bottom:12px;
    }
    .grid{
      display:grid;
      grid-template-columns:repeat(4, 1fr);
      gap:10px;
    }
    .mcard{
      position:relative;
      height:64px;
      border-radius:14px;
      border:1px solid #e5e7eb;
      background:#fff;
      cursor:pointer;
      touch-action:manipulation;
      display:grid;
      place-items:center;
      font-size:28px;
      font-weight:700;
      overflow:hidden;
    }
    .mcard:disabled{ cursor:not-allowed; }
    .mcard .front{ display:none; }
    .mcard.flipped .front{ display:block; }
    .mcard.flipped .back{ display:none; }
    .mcard .back{ font-size:16px; color:var(--muted); }
    .mcard.matched{
      border-color:rgba(22,163,74,.35);
      background:rgba(22,163,74,.08);
      cursor:default;
    }

    /* ===== Group Screen ===== */
    .qr{
      max-width:220px;
      width:70%;
      height:auto;
      border-radius:16px;
      margin-top:10px;
      box-shadow:0 10px 24px rgba(0,0,0,.10);
      background:#fff;
    }

    @media (max-width:420px){
      .card{ padding:22px; }
      h1{ font-size:24px; }
      .stat{ min-width:120px; }
      .mcard{ height:58px; font-size:26px; }
      .qr{ width:78%; }
    }
  </style>
</head>
<body>
  <main class="card" role="main">

    <!-- GAME 1: Clicker -->
    <section id="gameScreen" aria-label="Spiel 1">
      <h1>üéÆ Erst das Game, dann die Einladung</h1>
      <p class="muted">Ziel: <b><span id="targetLabel">20</span> Taps</b> in <b><span id="durationLabel">10</span> Sekunden</b>.</p>

      <div class="row" aria-label="Status">
        <div class="stat">‚è±Ô∏è Zeit: <b id="time">10</b>s</div>
        <div class="stat">‚≠ê Taps: <b id="score">0</b>/<span id="targetInline">20</span></div>
      </div>

      <div class="row" style="margin-top:16px;">
        <button id="startBtn" class="btn small" type="button">Start</button>
        <button id="resetBtn" class="btn secondary small" type="button">Reset</button>
      </div>

      <button id="tapBtn" class="btn tap" type="button" disabled>Tap! üëÜ</button>

      <p id="msg" class="muted" aria-live="polite"></p>
      <p class="muted"><span class="pill">Good Luck!</span></p>
    </section>

    <!-- INVITATION -->
    <section id="inviteScreen" class="hidden" aria-label="Einladung">
      <h1>üéÇ Geburtstagseinladung</h1>
      <p>Ich feiere Geburtstag und du bist eingeladen!</p>

      <div class="details" aria-label="Details">
        <div class="line"><span>üìÖ Datum</span><b>14. M√§rz 2026</b></div>
        <div class="line"><span>‚è∞ Uhrzeit</span><b>ab 18:00</b></div>
        <div class="line"><span>üìç Ort</span><b>Schenkenfelden</b></div>
      </div>

      <hr class="divider" />

      <div class="row">
        <button id="rsvpBtn" class="btn" type="button">Zusage</button>
      </div>

      <div class="row" style="margin-top:12px;">
        <button id="playAgainBtn" class="btn secondary small" type="button">Nochmal spielen</button>
      </div>
    </section>

    <!-- GAME 2: Memory -->
    <section id="memoryScreen" class="hidden" aria-label="Memory">
      <h1>üß† Memory-Check</h1>
      <p class="muted">Finde alle Paare, dann bekommst du den WhatsApp Einladungslink.</p>

      <div class="memoryWrap">
        <div class="memoryTop">
          <span class="pill">4 Paare finden</span>
          <span class="pill">Z√ºge: <b id="moves">0</b></span>
          <span id="memStatus" class="pill">Noch nicht geschafft</span>
        </div>

        <div id="grid" class="grid" aria-label="Memory Feld"></div>
      </div>

      <div class="row" style="margin-top:16px;">
        <button id="memRestartBtn" class="btn secondary small" type="button">Neu mischen</button>
        <button id="memBackBtn" class="btn secondary small" type="button">Zur√ºck</button>
      </div>

      <p id="memMsg" class="muted" aria-live="polite"></p>
    </section>

    <!-- GROUP JOIN -->
    <section id="groupScreen" class="hidden" aria-label="WhatsApp Gruppe">
      <h1>üí¨ WhatsApp-Gruppe</h1>
      <p class="muted">Tritt der Gruppe bei ‚Äì dort stehen alle Infos & Updates.</p>

      <div class="row" style="margin-top:18px;">
        <a id="groupBtn" class="btn" href="#" target="_blank" rel="noopener">
          üëâ Zur WhatsApp-Gruppe
        </a>
      </div>

      <p class="muted" style="margin-top:14px;">Oder QR-Code scannen:</p>

      <!-- Lege dein QR-Bild als group-qr.png neben die index.html -->
      <img class="qr" src="group-qr.png" alt="WhatsApp Gruppen QR">

      <p id="groupMsg" class="muted" aria-live="polite"></p>
    </section>

  </main>

  <script>
    // ===== Settings (Spiel 1) =====
    const TARGET = 20;
    const DURATION = 10;

    // ===== WhatsApp (Privat an dich) =====
    // Nummer international OHNE +, OHNE Leerzeichen, OHNE f√ºhrende 0 nach 43
    const WHATSAPP_NUMBER = "4368184496409";

    // ===== Inhalte =====
    const EVENT_TITLE = "30er Geburtstag üéâ";
    const EVENT_DATE = "14. M√§rz 2026";
    const EVENT_TIME = "ab 18:00";
    const EVENT_LOCATION = "Schenkenfelden";
    const EXTRA_INFO = "Bitte kurz Bescheid geben, ob du kommst üòä";

    // Gruppenlink hier rein (statt DEIN_CODE_HIER)
    const WHATSAPP_GROUP_LINK = "https://chat.whatsapp.com/Lm6QG6WLdUeDsdrFzb79VW?mode=gi_t";

    function buildWhatsAppText(){
      return (
        "Hi! Ich bin dabei üéâ\n\n" +
        "üéÇ " + EVENT_TITLE + "\n" +
        "üìÖ " + EVENT_DATE + "\n" +
        "‚è∞ " + EVENT_TIME + "\n" +
        "üìç " + EVENT_LOCATION + "\n\n" +
        EXTRA_INFO + "\n\n" +
        "üí¨ Gruppe (Infos): " + WHATSAPP_GROUP_LINK
      );
    }

    function sendToWhatsApp(){
      const text = buildWhatsAppText();

      if (WHATSAPP_NUMBER.trim().length === 0){
        alert(text);
        return;
      }

      const url = "https://wa.me/" + encodeURIComponent(WHATSAPP_NUMBER.trim())
        + "?text=" + encodeURIComponent(text);

      window.location.href = url;
    }

    // ===== Elements =====
    const gameScreen = document.getElementById("gameScreen");
    const inviteScreen = document.getElementById("inviteScreen");
    const memoryScreen = document.getElementById("memoryScreen");
    const groupScreen = document.getElementById("groupScreen");

    const timeEl = document.getElementById("time");
    const scoreEl = document.getElementById("score");
    const msgEl = document.getElementById("msg");

    const startBtn = document.getElementById("startBtn");
    const resetBtn = document.getElementById("resetBtn");
    const tapBtn = document.getElementById("tapBtn");
    const playAgainBtn = document.getElementById("playAgainBtn");
    const rsvpBtn = document.getElementById("rsvpBtn");

    // Memory elements
    const gridEl = document.getElementById("grid");
    const movesEl = document.getElementById("moves");
    const memStatusEl = document.getElementById("memStatus");
    const memMsgEl = document.getElementById("memMsg");
    const memRestartBtn = document.getElementById("memRestartBtn");
    const memBackBtn = document.getElementById("memBackBtn");

    // Group elements
    const groupBtn = document.getElementById("groupBtn");
    const sendInfoBtn = document.getElementById("sendInfoBtn");
    const groupBackBtn = document.getElementById("groupBackBtn");
    const groupMsg = document.getElementById("groupMsg");

    // Labels
    document.getElementById("targetLabel").textContent = String(TARGET);
    document.getElementById("targetInline").textContent = String(TARGET);
    document.getElementById("durationLabel").textContent = String(DURATION);

    function showOnly(screen){
      gameScreen.classList.add("hidden");
      inviteScreen.classList.add("hidden");
      memoryScreen.classList.add("hidden");
      groupScreen.classList.add("hidden");
      screen.classList.remove("hidden");
    }

    // ===== Game 1 State =====
    let timeLeft = DURATION;
    let score = 0;
    let running = false;
    let timerId = null;

    function renderGame1(){
      timeEl.textContent = String(timeLeft);
      scoreEl.textContent = String(score);
    }

    function stopTimer(){
      if (timerId !== null){
        clearInterval(timerId);
        timerId = null;
      }
    }

    function resetGame1(){
      stopTimer();
      timeLeft = DURATION;
      score = 0;
      running = false;
      msgEl.textContent = "";
      startBtn.disabled = false;
      tapBtn.disabled = true;
      renderGame1();
    }

    function showInvitation(){
      showOnly(inviteScreen);
    }

    function showGame(){
      showOnly(gameScreen);
      resetGame1();
    }

    function showGroup(){
      showOnly(groupScreen);
      groupBtn.href = WHATSAPP_GROUP_LINK;
      groupMsg.textContent = "‚úÖ Fast fertig: Gruppe beitreten f√ºr mehr Infos.";
    }

    function endGame1(){
      running = false;
      stopTimer();
      tapBtn.disabled = true;
      startBtn.disabled = false;

      if (score >= TARGET){
        msgEl.textContent = `‚úÖ Geschafft! (${score}/${TARGET}) ‚Äî Einladung freigeschaltet.`;
        setTimeout(showInvitation, 450);
      } else {
        msgEl.textContent = `‚ùå ${score}/${TARGET}. Versuch‚Äôs nochmal!`;
      }
    }

    function startGame1(){
      resetGame1();
      running = true;
      startBtn.disabled = true;
      tapBtn.disabled = false;
      msgEl.textContent = `Los! ${TARGET} Taps in ${DURATION}s.`;
      renderGame1();

      timerId = setInterval(() => {
        timeLeft -= 1;
        renderGame1();
        if (timeLeft <= 0) endGame1();
      }, 1000);
    }

    startBtn.addEventListener("click", startGame1);
    resetBtn.addEventListener("click", resetGame1);

    tapBtn.addEventListener("pointerdown", (e) => {
      e.preventDefault();
      if (!running) return;
      score += 1;
      renderGame1();
      if (score >= TARGET) endGame1();
    });
    tapBtn.addEventListener("click", (e) => e.preventDefault());

    playAgainBtn.addEventListener("click", showGame);

    // RSVP -> Memory starten
    rsvpBtn.addEventListener("click", () => {
      resetMemory();
      showOnly(memoryScreen);
    });

    // ===== Memory =====
    const PAIRS = ["üéà","üéÅ","üçï","ü•≥"]; // 4 Paare
    let deck = [];
    let first = null;
    let second = null;
    let lock = false;
    let matched = 0;
    let moves = 0;

    function shuffle(arr){
      for (let i = arr.length - 1; i > 0; i--){
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
      return arr;
    }

    function resetMemory(){
      deck = shuffle([...PAIRS, ...PAIRS].map((v, idx) => ({ id: idx + "-" + v, v })));
      first = null;
      second = null;
      lock = false;
      matched = 0;
      moves = 0;
      movesEl.textContent = "0";
      memStatusEl.textContent = "Noch nicht geschafft";
      memMsgEl.textContent = "Tipp: erst merken, dann matchen üòâ";
      renderMemory();
    }

    function renderMemory(){
      gridEl.innerHTML = "";
      for (const card of deck){
        const btn = document.createElement("button");
        btn.type = "button";
        btn.className = "mcard";
        btn.dataset.id = card.id;
        btn.dataset.value = card.v;

        btn.innerHTML = `
          <span class="front">${card.v}</span>
          <span class="back">?</span>
        `;

        btn.addEventListener("pointerdown", (e) => {
          e.preventDefault();
          onPick(btn);
        });
        btn.addEventListener("click", (e) => e.preventDefault());

        gridEl.appendChild(btn);
      }
    }

    function flip(btn, on){
      if (on) btn.classList.add("flipped");
      else btn.classList.remove("flipped");
    }

    function markMatched(btn){
      btn.classList.add("matched");
      btn.disabled = true;
    }

    function onPick(btn){
      if (lock) return;
      if (btn.classList.contains("matched")) return;
      if (btn === first) return;

      flip(btn, true);

      if (first === null){
        first = btn;
        return;
      }

      second = btn;
      moves += 1;
      movesEl.textContent = String(moves);

      const a = first.dataset.value;
      const b = second.dataset.value;

      if (a === b){
        markMatched(first);
        markMatched(second);
        matched += 1;
        first = null;
        second = null;

        if (matched === PAIRS.length){
          memStatusEl.textContent = "‚úÖ Geschafft";
          memMsgEl.textContent = "Super! Jetzt zur Gruppe / WhatsApp‚Ä¶";
          setTimeout(showGroup, 650);
        } else {
          memMsgEl.textContent = "‚úÖ Match!";
        }
        return;
      }

      lock = true;
      memMsgEl.textContent = "‚ùå Kein Match";
      setTimeout(() => {
        flip(first, false);
        flip(second, false);
        first = null;
        second = null;
        lock = false;
      }, 650);
    }

    memRestartBtn.addEventListener("click", resetMemory);
    memBackBtn.addEventListener("click", showInvitation);

    // Group actions
    sendInfoBtn.addEventListener("click", sendToWhatsApp);
    groupBackBtn.addEventListener("click", showInvitation);

    // Init
    showOnly(gameScreen);
    renderGame1();
  </script>
</body>
</html>
